# aff_script

Простой скрипт партнёрской программы, позволяющий скрывать партнёрские хвосты типа `?p=1`.

Для работы потребуется отдельный домен (или папка, если неохота регистрировать новый домен. Но лучше всё-таки отдельный домен), целевые страницы (лид-магниты, продажники и т.п.) и БД MySQL.

Запрос будет выглядеть примерно так: `https://domain.ru/123456`, где 123456 - партнёрский токен, по которому будет загружаться целевая страница.

### Структура файлов.

```
/domains_recieve
...htaccess
..index.php
/frame_src
..affiliate_page.php
testdb.sql
```

`/domains_recieve` - тут лежит файл с фреймом, в который загружается целевая страница.
`/frame_src` - предполагаемая целевая страница.

### Принцип действия.

На странице /domains_recieve/index.php происходит обработка адресной строки, из которой вытаскивается партнёрский токен. Отправляется запрос в БД, который возвращает массив, содержащий название страницы (подставляется в Title), ссылку с партнёрским ID и код (подставляется в ID фрейма).

Как реализовать, чтобы высота фрейма подстраивалась под содержимое без появления прокрутки, я пока не нашёл способ, поэтому было бы неплохо передавать в БД высоту страницы для подставления значения в параметры фрейма.

### Напоследок.

Данный скрипт можно модернизировать, добавив привязку к партнёру на страницах оплаты и т.д. Если у вас есть такая потребность - пишите в [телеграм](https://t.me/ramapriya_doom)

